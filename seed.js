// Generated by CoffeeScript 1.9.0
(function() {
  var Chance, Hyvelet, Location, Sequelize, sequelize;

  Sequelize = require('sequelize');

  Chance = require('chance');

  sequelize = new Sequelize('hive_development', '', '', {
    dialect: 'postgres',
    port: 5432
  });

  Hyvelet = sequelize["import"](__dirname + "/models/Hyvelet");

  Location = sequelize["import"](__dirname + "/models/Location");

  Hyvelet.hasMany(Location);

  Location.belongsTo(Hyvelet, {
    foreignKey: 'hyvelet_id'
  });

  sequelize.sync();

  sequelize.authenticate().complete(function(err) {
    var chance, hyvelet, i, location, noop, now;
    if (!!err) {
      console.log('Unable to connect to the database:', err);
    } else {
      chance = Chance();
      now = Date();
      noop = function() {};
      hyvelet = Hyvelet.create({
        name: chance.name(),
        pin: chance.guid(),
        lat: chance.latitude({
          fix: 7
        }),
        lng: chance.longitude({
          fix: 7
        })
      });
      i = 0;
      while (i < 10) {
        location = Location.create({
          deviceid: chance.guid(),
          lat: chance.latitude({
            fix: 7
          }),
          lng: chance.longitude({
            fix: 7
          }),
          created_at: now,
          updated_at: now
        });
        debugger;
        hyvelet.setLocation(location);
        i++;
      }
    }
  });

}).call(this);
